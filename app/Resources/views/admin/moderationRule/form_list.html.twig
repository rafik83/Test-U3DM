{% extends 'admin/layout.html.twig' %}

{% set activeTab = 'setting' %}
{% set activeMenu = 'moderation_rule_list' %}


{% block title %} titre de la form {% endblock %}




{% block body %}


<h2>{{ block('title') }}</h2>


    <div class="row">
        <div class="col-sm-12">
            <div class="panel panel-default panel-table">
                <div class="panel-heading panel-heading-divider">
                    <div class="tools"><a href="{{ path('admin_moderation_rule_add') }}"><span class="icon s7-magic-wand"></span> {{ 'admin.moderation.rule.add.title'|trans }}</a></div>
                    {{ 'admin.moderation.rule.list.title'|trans }}
                    <span class="panel-subtitle">{{ 'admin.moderation.rule.list.subtitle'|trans }}</span>
                </div>

            </div>
        </div>
    </div>

    <hr/>

    {%
        form_theme form
            'admin/moderationRule/formTheme.html.twig'
    %}

{% if form.rules is defined %}
    {# we do not want to use the bootstrap theme for the portfolio nested forms #}
    {% form_theme form.rules with ['form/jquery.collection.html.twig'] only %}
{% endif %}


    {{ form_start(form) }}
          <div class="form-group">
            <label class="col-sm-2 control-label required">{{ 'model.form.field.portfolio_title'|trans }}</label>
            <label class="col-sm-10">{{ 'model.form.field.portfolio'|trans }}</label>
            <div class="col-sm-2"></div>
            <div class="col-sm-10">
                {{ form_widget(form.rules) }}
            </div>
        </div>
    {{ form_end(form) }}
    <hr/>

    <table class="table">
        <thead>
            <th>ID</th>
            <th>Name</th>
            <th>Position</th>
        </thead>
        <tbody>
            {% for rule in data %}
                <tr>
                    <td>{{ rule.id }}</td>
                    <td>{{ rule.expression }}</td>
                    <td>{{ rule.replace }}</td>
                    <td>{{ rule.needModerate }}</td>
                    <td>{{ rule.position }}</td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="3">No actions submitted</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <hr/>

    <p>Code used:</p>
    <pre>{{ block('script') | e }}</pre>

{% endblock %}

{% block script %}

    <script type="text/javascript">

        $('.actions-collection').collection({
            position_field_selector: '.my-position',
            allow_duplicate: true
        });

    </script>

{% endblock %}
